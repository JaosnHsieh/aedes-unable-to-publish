diff --git a/node_modules/aedes/aedes.js b/node_modules/aedes/aedes.js
index 5f74455..9a7547f 100755
--- a/node_modules/aedes/aedes.js
+++ b/node_modules/aedes/aedes.js
@@ -151,7 +151,7 @@ function Aedes (opts) {
     if (that.clients[clientId] && serverId !== that.id) {
       that.clients[clientId].close(done)
     } else {
-      done()
+      setImmediate(done)
     }
   })
 
